{"ast":null,"code":"import { FormControl } from '@angular/forms';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatGridListModule } from '@angular/material/grid-list';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatTableModule } from '@angular/material/table';\nimport { MatSortModule } from '@angular/material/sort';\nimport { MatListModule } from '@angular/material/list';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { MatCardModule } from '@angular/material/card';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./orderadmins.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/card\";\nfunction OrderadminsComponent_tr_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function OrderadminsComponent_tr_23_Template_button_click_4_listener() {\n      const order_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.viewOrderDetails(order_r2));\n    });\n    i0.ɵɵtext(5, \"View Order Details\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\")(12, \"select\", 9)(13, \"option\", 10);\n    i0.ɵɵtext(14, \"Pending\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"option\", 11);\n    i0.ɵɵtext(16, \"Preparing\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"option\", 12);\n    i0.ɵɵtext(18, \"Completed\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"option\", 13);\n    i0.ɵɵtext(20, \"Cancelled\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(21, \"td\")(22, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function OrderadminsComponent_tr_23_Template_button_click_22_listener() {\n      const order_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.onUpdateStatus(order_r2));\n    });\n    i0.ɵɵtext(23, \"Update\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const order_r2 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r2.id);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(8, 4, order_r2.orderDate, \"dd/MM/yyyy\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(order_r2.amount);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"formControl\", ctx_r2.statusControls[order_r2.id]);\n  }\n}\nexport class OrderadminsComponent {\n  filterEmployees() {}\n  constructor(orderService, router) {\n    this.orderService = orderService;\n    this.router = router;\n    this.orders = [];\n    this.token = null;\n    this.statusControls = {};\n    this.searchText = '';\n  }\n  ngOnInit() {\n    this.token = localStorage.getItem('token');\n    if (!this.token) {\n      console.error('No token found in local storage!');\n    }\n    this.fetchOrders();\n  }\n  fetchOrders() {\n    this.orderService.getAllOrders().subscribe(data => {\n      this.orders = data;\n      this.orders.forEach(order => {\n        this.statusControls[order.id] = new FormControl(order.status);\n      });\n    }, error => {\n      console.error('Error fetching orders:', error);\n    });\n  }\n  onUpdateStatus(order) {\n    const newStatus = this.statusControls[order.id].value;\n    this.orderService.updateOrderStatus(order.id, newStatus).subscribe(updatedOrder => {\n      console.log('Order updated:', updatedOrder);\n      const index = this.orders.findIndex(o => o.id === updatedOrder.id);\n      if (index !== -1) {\n        this.orders[index] = updatedOrder;\n      }\n    }, error => {\n      if (error.status === 403) {\n        console.error('Access forbidden: You do not have permission to update this order.');\n      } else {\n        console.error('Error updating order:', error);\n      }\n    });\n  }\n  viewOrderDetails(order) {\n    this.router.navigate(['/order-details', order.id]);\n  }\n  static {\n    this.ɵfac = function OrderadminsComponent_Factory(t) {\n      return new (t || OrderadminsComponent)(i0.ɵɵdirectiveInject(i1.OrderService), i0.ɵɵdirectiveInject(i2.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: OrderadminsComponent,\n      selectors: [[\"app-orderadmins\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 24,\n      vars: 2,\n      consts: [[1, \"cardWithShadow\", \"theme-card\"], [1, \"order-header\"], [1, \"m-b-0\"], [1, \"order-table-container\"], [1, \"order-table\"], [1, \"mb-4\"], [\"type\", \"text\", \"placeholder\", \"Search employees...\", 1, \"w-full\", \"p-2\", \"border\", \"border-gray-300\", \"rounded-lg\", 3, \"ngModelChange\", \"ngModel\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn-details\", 3, \"click\"], [3, \"formControl\"], [\"value\", \"PENDING\"], [\"value\", \"PREPARING\"], [\"value\", \"COMPLETED\"], [\"value\", \"CANCELLED\"], [1, \"btn-update\", 3, \"click\"]],\n      template: function OrderadminsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"mat-card\", 0)(1, \"mat-card-header\", 1)(2, \"mat-card-title\", 2);\n          i0.ɵɵtext(3, \"Order list\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(4, \"div\", 3)(5, \"table\", 4)(6, \"thead\")(7, \"tr\")(8, \"th\");\n          i0.ɵɵtext(9, \"Order number\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"th\");\n          i0.ɵɵtext(11, \"Details\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"th\");\n          i0.ɵɵtext(13, \"Date\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"th\");\n          i0.ɵɵtext(15, \"Amount\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"th\");\n          i0.ɵɵtext(17, \"Status\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"th\");\n          i0.ɵɵtext(19, \"Action\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(20, \"tbody\")(21, \"div\", 5)(22, \"input\", 6);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function OrderadminsComponent_Template_input_ngModelChange_22_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.searchText, $event) || (ctx.searchText = $event);\n            return $event;\n          });\n          i0.ɵɵlistener(\"ngModelChange\", function OrderadminsComponent_Template_input_ngModelChange_22_listener() {\n            return ctx.filterEmployees();\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(23, OrderadminsComponent_tr_23_Template, 24, 7, \"tr\", 7);\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(22);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.searchText);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngForOf\", ctx.orders);\n        }\n      },\n      dependencies: [ReactiveFormsModule, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.FormControlDirective, CommonModule, i4.NgForOf, i4.DatePipe, MatFormFieldModule, MatDividerModule, MatGridListModule, MatTableModule, MatSortModule, MatListModule, FormsModule, i3.NgModel, MatCardModule, i5.MatCard, i5.MatCardHeader, i5.MatCardTitle],\n      styles: [\"*[_ngcontent-%COMP%] {\\n  margin: 0;\\n  padding: 0;\\n  box-sizing: border-box;\\n  font-family: Arial, sans-serif;\\n}\\n\\n.admin-orders-page[_ngcontent-%COMP%] {\\n  max-width: 1200px;\\n  margin: 2rem auto;\\n  padding: 1rem;\\n}\\n\\nheader[_ngcontent-%COMP%] {\\n  text-align: center;\\n  margin-bottom: 2rem;\\n}\\n\\nh1[_ngcontent-%COMP%] {\\n  color: #333;\\n  font-size: 2rem;\\n  border-bottom: 2px solid #5d87ff;\\n  display: inline-block;\\n  padding-bottom: 0.5rem;\\n}\\n\\n.order-table-container[_ngcontent-%COMP%] {\\n  overflow-x: auto;\\n}\\n\\n.order-table[_ngcontent-%COMP%] {\\n  width: 100%;\\n  border-collapse: collapse;\\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\\n}\\n\\n.order-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .order-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\n  padding: 1rem;\\n  text-align: left;\\n  border-bottom: 1px solid #ddd;\\n}\\n\\n.order-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\\n  background-color: #f4f4f4;\\n  color: #333;\\n}\\n\\n.order-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover {\\n  background-color: #f1f1f1;\\n}\\n\\nselect[_ngcontent-%COMP%] {\\n  padding: 0.5rem;\\n  border: 1px solid #ddd;\\n  border-radius: 4px;\\n  background-color: #fff;\\n  color: #333;\\n  cursor: pointer;\\n}\\n\\n.btn-update[_ngcontent-%COMP%] {\\n  padding: 0.5rem 1rem;\\n  background-color: #5d87ff;\\n  color: #fff;\\n  border: none;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  transition: background-color 0.3s;\\n}\\n\\n.btn-update[_ngcontent-%COMP%]:hover {\\n  background-color: #476bd8;\\n}\\n\\n.btn-details[_ngcontent-%COMP%] {\\n  padding: 0.5rem 1rem;\\n  background-color: #df7ae8;\\n  color: #fff;\\n  border: none;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  transition: background-color 0.3s;\\n}\\n\\n\\n\\n@media (max-width: 768px) {\\n  .order-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%] {\\n    display: none;\\n  }\\n  .order-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .order-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .order-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\n    display: block;\\n    width: 100%;\\n  }\\n  .order-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] {\\n    margin-bottom: 15px;\\n    border-bottom: 1px solid #ddd;\\n  }\\n  .order-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\n    text-align: right;\\n    padding-left: 50%;\\n    position: relative;\\n  }\\n  .order-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before {\\n    content: attr(data-label);\\n    position: absolute;\\n    left: 15px;\\n    width: calc(50% - 30px);\\n    font-weight: bold;\\n    text-align: left;\\n  }\\n  .btn-update[_ngcontent-%COMP%], .btn-details[_ngcontent-%COMP%] {\\n    width: 100%;\\n    padding: 10px;\\n    margin-top: 10px;\\n    font-size: 14px;\\n  }\\n  select[_ngcontent-%COMP%] {\\n    width: 100%;\\n    font-size: 14px;\\n    margin-top: 10px;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvb3JkZXJhZG1pbnMvb3JkZXJhZG1pbnMuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxTQUFBO0VBQ0EsVUFBQTtFQUNBLHNCQUFBO0VBQ0EsOEJBQUE7QUFDRjs7QUFFQTtFQUNFLGlCQUFBO0VBQ0EsaUJBQUE7RUFDQSxhQUFBO0FBQ0Y7O0FBRUE7RUFDRSxrQkFBQTtFQUNBLG1CQUFBO0FBQ0Y7O0FBRUE7RUFDRSxXQUFBO0VBQ0EsZUFBQTtFQUNBLGdDQUFBO0VBQ0EscUJBQUE7RUFDQSxzQkFBQTtBQUNGOztBQUVBO0VBQ0UsZ0JBQUE7QUFDRjs7QUFFQTtFQUNFLFdBQUE7RUFDQSx5QkFBQTtFQUNBLHdDQUFBO0FBQ0Y7O0FBRUE7O0VBRUUsYUFBQTtFQUNBLGdCQUFBO0VBQ0EsNkJBQUE7QUFDRjs7QUFFQTtFQUNFLHlCQUFBO0VBQ0EsV0FBQTtBQUNGOztBQUVBO0VBQ0UseUJBQUE7QUFDRjs7QUFFQTtFQUNFLGVBQUE7RUFDQSxzQkFBQTtFQUNBLGtCQUFBO0VBQ0Esc0JBQUE7RUFDQSxXQUFBO0VBQ0EsZUFBQTtBQUNGOztBQUVBO0VBQ0Usb0JBQUE7RUFDQSx5QkFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSxlQUFBO0VBQ0EsaUNBQUE7QUFDRjs7QUFFQTtFQUNFLHlCQUFBO0FBQ0Y7O0FBRUE7RUFDRSxvQkFBQTtFQUNBLHlCQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtFQUNBLGVBQUE7RUFDQSxpQ0FBQTtBQUNGOztBQUVBLHNCQUFBO0FBQ0E7RUFDRTtJQUNFLGFBQUE7RUFDRjtFQUVBOzs7SUFHRSxjQUFBO0lBQ0EsV0FBQTtFQUFGO0VBR0E7SUFDRSxtQkFBQTtJQUNBLDZCQUFBO0VBREY7RUFJQTtJQUNFLGlCQUFBO0lBQ0EsaUJBQUE7SUFDQSxrQkFBQTtFQUZGO0VBS0E7SUFDRSx5QkFBQTtJQUNBLGtCQUFBO0lBQ0EsVUFBQTtJQUNBLHVCQUFBO0lBQ0EsaUJBQUE7SUFDQSxnQkFBQTtFQUhGO0VBTUE7SUFDRSxXQUFBO0lBQ0EsYUFBQTtJQUNBLGdCQUFBO0lBQ0EsZUFBQTtFQUpGO0VBT0E7SUFDRSxXQUFBO0lBQ0EsZUFBQTtJQUNBLGdCQUFBO0VBTEY7QUFDRiIsInNvdXJjZXNDb250ZW50IjpbIioge1xuICBtYXJnaW46IDA7XG4gIHBhZGRpbmc6IDA7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjtcbn1cblxuLmFkbWluLW9yZGVycy1wYWdlIHtcbiAgbWF4LXdpZHRoOiAxMjAwcHg7XG4gIG1hcmdpbjogMnJlbSBhdXRvO1xuICBwYWRkaW5nOiAxcmVtO1xufVxuXG5oZWFkZXIge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIG1hcmdpbi1ib3R0b206IDJyZW07XG59XG5cbmgxIHtcbiAgY29sb3I6ICMzMzM7XG4gIGZvbnQtc2l6ZTogMnJlbTtcbiAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICM1ZDg3ZmY7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgcGFkZGluZy1ib3R0b206IDAuNXJlbTtcbn1cblxuLm9yZGVyLXRhYmxlLWNvbnRhaW5lciB7XG4gIG92ZXJmbG93LXg6IGF1dG87XG59XG5cbi5vcmRlci10YWJsZSB7XG4gIHdpZHRoOiAxMDAlO1xuICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xuICBib3gtc2hhZG93OiAwIDRweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xufVxuXG4ub3JkZXItdGFibGUgdGgsXG4ub3JkZXItdGFibGUgdGQge1xuICBwYWRkaW5nOiAxcmVtO1xuICB0ZXh0LWFsaWduOiBsZWZ0O1xuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDtcbn1cblxuLm9yZGVyLXRhYmxlIHRoIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y0ZjRmNDtcbiAgY29sb3I6ICMzMzM7XG59XG5cbi5vcmRlci10YWJsZSB0Ym9keSB0cjpob3ZlciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmMWYxZjE7XG59XG5cbnNlbGVjdCB7XG4gIHBhZGRpbmc6IDAuNXJlbTtcbiAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICBjb2xvcjogIzMzMztcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4uYnRuLXVwZGF0ZSB7XG4gIHBhZGRpbmc6IDAuNXJlbSAxcmVtO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNWQ4N2ZmO1xuICBjb2xvcjogI2ZmZjtcbiAgYm9yZGVyOiBub25lO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzO1xufVxuXG4uYnRuLXVwZGF0ZTpob3ZlciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICM0NzZiZDg7XG59XG5cbi5idG4tZGV0YWlscyB7XG4gIHBhZGRpbmc6IDAuNXJlbSAxcmVtO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGY3YWU4O1xuICBjb2xvcjogI2ZmZjtcbiAgYm9yZGVyOiBub25lO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzO1xufVxuXG4vKiBSZXNwb25zaXZlIHN0eWxlcyAqL1xuQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XG4gIC5vcmRlci10YWJsZSB0aGVhZCB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxuXG4gIC5vcmRlci10YWJsZSB0Ym9keSxcbiAgLm9yZGVyLXRhYmxlIHRyLFxuICAub3JkZXItdGFibGUgdGQge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIHdpZHRoOiAxMDAlO1xuICB9XG5cbiAgLm9yZGVyLXRhYmxlIHRyIHtcbiAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkO1xuICB9XG5cbiAgLm9yZGVyLXRhYmxlIHRkIHtcbiAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICBwYWRkaW5nLWxlZnQ6IDUwJTtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIH1cblxuICAub3JkZXItdGFibGUgdGQ6YmVmb3JlIHtcbiAgICBjb250ZW50OiBhdHRyKGRhdGEtbGFiZWwpO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBsZWZ0OiAxNXB4O1xuICAgIHdpZHRoOiBjYWxjKDUwJSAtIDMwcHgpO1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gIH1cblxuICAuYnRuLXVwZGF0ZSwgLmJ0bi1kZXRhaWxzIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBwYWRkaW5nOiAxMHB4O1xuICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICB9XG5cbiAgc2VsZWN0IHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgbWFyZ2luLXRvcDogMTBweDtcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["FormControl","ReactiveFormsModule","MatFormFieldModule","MatGridListModule","MatDividerModule","MatTableModule","MatSortModule","MatListModule","FormsModule","CommonModule","MatCardModule","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","OrderadminsComponent_tr_23_Template_button_click_4_listener","order_r2","ɵɵrestoreView","_r1","$implicit","ctx_r2","ɵɵnextContext","ɵɵresetView","viewOrderDetails","OrderadminsComponent_tr_23_Template_button_click_22_listener","onUpdateStatus","ɵɵadvance","ɵɵtextInterpolate","id","ɵɵpipeBind2","orderDate","amount","ɵɵproperty","statusControls","OrderadminsComponent","filterEmployees","constructor","orderService","router","orders","token","searchText","ngOnInit","localStorage","getItem","console","error","fetchOrders","getAllOrders","subscribe","data","forEach","order","status","newStatus","value","updateOrderStatus","updatedOrder","log","index","findIndex","o","navigate","ɵɵdirectiveInject","i1","OrderService","i2","Router","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","OrderadminsComponent_Template","rf","ctx","ɵɵtwoWayListener","OrderadminsComponent_Template_input_ngModelChange_22_listener","$event","ɵɵtwoWayBindingSet","ɵɵtemplate","OrderadminsComponent_tr_23_Template","ɵɵtwoWayProperty","i3","NgSelectOption","ɵNgSelectMultipleOption","DefaultValueAccessor","SelectControlValueAccessor","NgControlStatus","FormControlDirective","i4","NgForOf","DatePipe","NgModel","i5","MatCard","MatCardHeader","MatCardTitle","styles"],"sources":["/home/layth/Desktop/front/front/src/app/pages/orderadmins/orderadmins.component.ts","/home/layth/Desktop/front/front/src/app/pages/orderadmins/orderadmins.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { OrderService } from './orderadmins.service';\nimport { Order } from '../models/order'; \nimport { Router } from '@angular/router';\nimport { FormControl } from '@angular/forms';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { MatDialog } from '@angular/material/dialog';\nimport { MatIcon } from '@angular/material/icon';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatLabel } from '@angular/material/form-field';\nimport { MatGridTile } from '@angular/material/grid-list';\nimport { MatGridListModule } from '@angular/material/grid-list';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatTableModule } from '@angular/material/table';\nimport { MatSortModule } from '@angular/material/sort';\nimport { MatListModule } from '@angular/material/list';\nimport { MatListItem } from '@angular/material/list';\nimport { OrderItem } from '../models/order-item';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { MatCardModule } from '@angular/material/card';\n\n@Component({\n  selector: 'app-orderadmins',\n  standalone: true,\n  imports: [ReactiveFormsModule, CommonModule,\n    MatIcon,\n    MatFormFieldModule,\n    MatLabel,\n    MatGridTile,\n    MatDividerModule,\n    MatGridListModule,\n    MatTableModule,\n    MatSortModule,\n    MatListModule,\n    MatListItem,\n    FormsModule,\n    MatCardModule,\n    ],\n  templateUrl: './orderadmins.component.html',\n  styleUrls: ['./orderadmins.component.scss']\n})\nexport class OrderadminsComponent implements OnInit {\n  orders: Order[] = [];\n  token: string | null = null;\n  statusControls: { [key: number]: FormControl } = {};\n  searchText: string = '';\n  filterEmployees() {\n    \n  }\n  constructor(private orderService: OrderService, private router: Router) { }\n\n  ngOnInit(): void {\n\n    this.token = localStorage.getItem('token');\n    if (!this.token) {\n      console.error('No token found in local storage!');\n    }\n\n    this.fetchOrders();\n  }\n\n  fetchOrders(): void {\n    this.orderService.getAllOrders().subscribe(\n      (data) => {\n        this.orders = data;\n    \n        this.orders.forEach(order => {\n          this.statusControls[order.id!] = new FormControl(order.status);\n        });\n      },\n      (error) => {\n        console.error('Error fetching orders:', error);\n      }\n    );\n  }\n\n  onUpdateStatus(order: Order): void {\n    const newStatus = this.statusControls[order.id!].value;\n\n    this.orderService.updateOrderStatus(order.id!, newStatus).subscribe(\n      (updatedOrder) => {\n        console.log('Order updated:', updatedOrder);\n  \n        const index = this.orders.findIndex(o => o.id === updatedOrder.id);\n        if (index !== -1) {\n          this.orders[index] = updatedOrder;\n        }\n      },\n      (error) => {\n        if (error.status === 403) {\n          console.error('Access forbidden: You do not have permission to update this order.');\n        } else {\n          console.error('Error updating order:', error);\n        }\n      }\n    );\n  }\n\n  viewOrderDetails(order: Order): void {\n    this.router.navigate(['/order-details', order.id]);\n  }\n}\n","<mat-card class=\"cardWithShadow theme-card\">\n  <mat-card-header class=\"order-header\">\n    <mat-card-title class=\"m-b-0\">Order list</mat-card-title>\n  </mat-card-header>\n    \n    <div class=\"order-table-container\">\n      <table class=\"order-table\">\n        <thead>\n          <tr>\n            <th>Order number</th>\n            <th>Details</th>\n            <th>Date</th>\n            <th>Amount</th>\n            <th>Status</th>\n            <th>Action</th>\n          </tr>\n        </thead>\n        <tbody>\n          <div class=\"mb-4\">\n            <input\n              type=\"text\"\n              placeholder=\"Search employees...\"\n              class=\"w-full p-2 border border-gray-300 rounded-lg\"\n              [(ngModel)]=\"searchText\"\n              (ngModelChange)=\"filterEmployees()\"\n            />\n          </div>\n          <tr *ngFor=\"let order of orders\">\n            <td>{{ order.id }}</td>\n            <td>\n              <button (click)=\"viewOrderDetails(order)\" class=\"btn-details\" >View Order Details</button>\n            </td>\n            <td>{{ order.orderDate | date: 'dd/MM/yyyy' }}</td>\n            <td>{{ order.amount }}</td>\n            <td>\n              <select [formControl]=\"statusControls[order.id!]\" >\n                <option value=\"PENDING\">Pending</option>\n                <option value=\"PREPARING\">Preparing</option>\n                <option value=\"COMPLETED\">Completed</option>\n                <option value=\"CANCELLED\">Cancelled</option>\n              </select>\n            </td>\n            <td>\n              <button class=\"btn-update\" (click)=\"onUpdateStatus(order)\">Update</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </mat-card>\n\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}