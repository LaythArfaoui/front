{"ast":null,"code":"import { MatCardModule } from '@angular/material/card';\nimport { CustomTablerIconsModule } from '../../custom-tabler-icons.module';\nimport { MatIcon } from '@angular/material/icon';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatGridListModule } from '@angular/material/grid-list';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatTableModule } from '@angular/material/table';\nimport { MatSortModule } from '@angular/material/sort';\nimport { MatListModule } from '@angular/material/list';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { jwtDecode } from 'jwt-decode';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../menu/order-service.service\";\nimport * as i2 from \"./order-state-service.service\";\nimport * as i3 from \"@angular/material/card\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\nfunction OrderComponent_tr_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 14)(1, \"td\");\n    i0.ɵɵelement(2, \"img\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"input\", 16);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function OrderComponent_tr_21_Template_input_ngModelChange_6_listener($event) {\n      const item_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      i0.ɵɵtwoWayBindingSet(item_r3.quantity, $event) || (item_r3.quantity = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"td\")(13, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function OrderComponent_tr_21_Template_button_click_13_listener() {\n      const item_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.removeItem(item_r3));\n    });\n    i0.ɵɵelementStart(14, \"mat-icon\");\n    i0.ɵɵtext(15, \"delete\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"alt\", item_r3.food.name);\n    i0.ɵɵproperty(\"src\", item_r3.food.picture, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r3.food.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", item_r3.quantity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", item_r3.food.price, \" TND\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(11, 6, item_r3.food.price * item_r3.quantity, \"1.2-2\"), \" TND\");\n  }\n}\nfunction OrderComponent_ng_container_43_tr_15_li_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\" \", item_r5.food.name, \" x \", item_r5.quantity, \" \");\n  }\n}\nfunction OrderComponent_ng_container_43_tr_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 14)(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\")(9, \"ul\");\n    i0.ɵɵtemplate(10, OrderComponent_ng_container_43_tr_15_li_10_Template, 2, 2, \"li\", 18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"number\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const order_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r6.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(5, 5, order_r6.orderDate, \"short\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(order_r6.status);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", order_r6.orderItems);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(13, 8, order_r6.total, \"1.2-2\"), \" TND\");\n  }\n}\nfunction OrderComponent_ng_container_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"table\", 3)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"Order ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Order Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Items\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"Total\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"tbody\");\n    i0.ɵɵtemplate(15, OrderComponent_ng_container_43_tr_15_Template, 14, 11, \"tr\", 4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(15);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.orders);\n  }\n}\nfunction OrderComponent_ng_template_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"No orders found for this user.\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class OrderComponent {\n  constructor(orderService, orderStateService, cdr) {\n    this.orderService = orderService;\n    this.orderStateService = orderStateService;\n    this.cdr = cdr;\n    this.orderItems = [];\n    this.token = null;\n    this.userId = null;\n    this.comments = '';\n    this.orders = [];\n  }\n  ngOnInit() {\n    this.loadTokenAndUserId();\n    this.loadOrderItems();\n    this.fetchOrders(); // Fetch all past orders on component initialization\n  }\n  loadTokenAndUserId() {\n    this.token = localStorage.getItem('token');\n    if (!this.token) {\n      console.error('No token found in local storage!');\n      return;\n    }\n    try {\n      const decodedToken = jwtDecode(this.token);\n      this.userId = decodedToken.userId;\n    } catch (error) {\n      console.error('Error decoding token:', error);\n    }\n  }\n  loadOrderItems() {\n    this.orderItems = this.orderStateService.getItems();\n    console.log('Order items loaded:', this.orderItems);\n  }\n  fetchOrders() {\n    if (this.userId && this.token) {\n      this.orderService.getOrdersByUserId(this.userId, this.token).subscribe(orders => {\n        this.orders = orders;\n        console.log('Fetched orders:', this.orders);\n        this.cdr.detectChanges();\n      }, error => {\n        console.error('Error fetching orders:', error);\n      });\n    }\n  }\n  submitOrder() {\n    if (this.token && this.userId !== null) {\n      const order = {\n        userId: this.userId,\n        items: this.orderItems,\n        total: this.getTotalPrice().toFixed(2),\n        comment: this.comments\n      };\n      console.log('Submitting order:', order);\n      this.orderService.createOrder(order, this.token).subscribe(response => {\n        console.log('Order submitted successfully', response);\n        this.clearOrder();\n      }, error => {\n        console.error('Error submitting order:', error);\n      });\n    } else {\n      console.error('Cannot submit order because the token or user ID is undefined!');\n    }\n  }\n  getTotalPrice() {\n    return this.orderItems.reduce((total, item) => total + item.food.price * item.quantity, 0);\n  }\n  clearOrder() {\n    this.orderStateService.clearItems();\n    this.orderItems = [];\n    console.log('Order cleared');\n  }\n  removeItem(item) {\n    this.orderItems = this.orderItems.filter(i => i !== item);\n    this.orderStateService.clearItems();\n    this.orderItems.forEach(i => this.orderStateService.addItem(i));\n    console.log('Item removed:', item);\n  }\n  static {\n    this.ɵfac = function OrderComponent_Factory(t) {\n      return new (t || OrderComponent)(i0.ɵɵdirectiveInject(i1.OrderService), i0.ɵɵdirectiveInject(i2.OrderStateService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: OrderComponent,\n      selectors: [[\"app-order\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 46,\n      vars: 8,\n      consts: [[\"noOrders\", \"\"], [1, \"order-summary-card\"], [1, \"order-header\"], [1, \"order-list-table\"], [\"class\", \"order-item-row\", 4, \"ngFor\", \"ngForOf\"], [\"colspan\", \"4\", 1, \"total-label\"], [1, \"total-price\"], [1, \"comments-section\"], [\"matInput\", \"\", \"placeholder\", \"Write your comments here...\", 1, \"comments-input\", 3, \"ngModelChange\", \"ngModel\"], [1, \"button-container\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [1, \"past-orders-card\"], [4, \"ngIf\", \"ngIfElse\"], [1, \"order-item-row\"], [1, \"order-item-image\", 3, \"src\", \"alt\"], [\"type\", \"number\", \"min\", \"0\", \"aria-label\", \"Quantity\", 1, \"quantity-input\", 3, \"ngModelChange\", \"ngModel\"], [\"mat-icon-button\", \"\", \"color\", \"warn\", 3, \"click\"], [4, \"ngFor\", \"ngForOf\"]],\n      template: function OrderComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"mat-card\", 1)(1, \"mat-card-header\", 2)(2, \"mat-card-title\");\n          i0.ɵɵtext(3, \"\\uD83D\\uDED2 Order Summary\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(4, \"mat-card-content\")(5, \"table\", 3)(6, \"thead\")(7, \"tr\")(8, \"th\");\n          i0.ɵɵtext(9, \"Image\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"th\");\n          i0.ɵɵtext(11, \"Description\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"th\");\n          i0.ɵɵtext(13, \"Quantity\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"th\");\n          i0.ɵɵtext(15, \"Unit Price\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"th\");\n          i0.ɵɵtext(17, \"Total Price\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"th\");\n          i0.ɵɵtext(19, \"Action\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(20, \"tbody\");\n          i0.ɵɵtemplate(21, OrderComponent_tr_21_Template, 16, 9, \"tr\", 4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(22, \"tfoot\")(23, \"tr\")(24, \"td\", 5);\n          i0.ɵɵtext(25, \"Total\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(26, \"td\", 6);\n          i0.ɵɵtext(27);\n          i0.ɵɵpipe(28, \"number\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(29, \"div\", 7)(30, \"h3\");\n          i0.ɵɵtext(31, \"\\uD83D\\uDCDD Comments\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(32, \"textarea\", 8);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function OrderComponent_Template_textarea_ngModelChange_32_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.comments, $event) || (ctx.comments = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(33, \"div\", 9)(34, \"button\", 10);\n          i0.ɵɵlistener(\"click\", function OrderComponent_Template_button_click_34_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.clearOrder());\n          });\n          i0.ɵɵtext(35, \"\\u274C Clear All\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(36, \"button\", 11);\n          i0.ɵɵlistener(\"click\", function OrderComponent_Template_button_click_36_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.submitOrder());\n          });\n          i0.ɵɵtext(37, \"\\u2705 Submit Order\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(38, \"mat-card\", 12)(39, \"mat-card-header\", 2)(40, \"mat-card-title\");\n          i0.ɵɵtext(41, \"\\uD83D\\uDCDC Past Orders\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(42, \"mat-card-content\");\n          i0.ɵɵtemplate(43, OrderComponent_ng_container_43_Template, 16, 1, \"ng-container\", 13)(44, OrderComponent_ng_template_44_Template, 2, 0, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          const noOrders_r7 = i0.ɵɵreference(45);\n          i0.ɵɵadvance(21);\n          i0.ɵɵproperty(\"ngForOf\", ctx.orderItems);\n          i0.ɵɵadvance(6);\n          i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(28, 5, ctx.getTotalPrice(), \"1.2-2\"), \" TND\");\n          i0.ɵɵadvance(5);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.comments);\n          i0.ɵɵadvance(11);\n          i0.ɵɵproperty(\"ngIf\", ctx.orders.length > 0)(\"ngIfElse\", noOrders_r7);\n        }\n      },\n      dependencies: [MatCardModule, i3.MatCard, i3.MatCardContent, i3.MatCardHeader, i3.MatCardTitle, CustomTablerIconsModule, MatIcon, MatFormFieldModule, MatGridListModule, MatDividerModule, MatTableModule, MatSortModule, MatListModule, FormsModule, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.NgControlStatus, i4.MinValidator, i4.NgModel, CommonModule, i5.NgForOf, i5.NgIf, i5.DecimalPipe, i5.DatePipe],\n      styles: [\".order-summary-card[_ngcontent-%COMP%], .past-orders-card[_ngcontent-%COMP%] {\\n  margin: 20px auto;\\n  padding: 20px;\\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\\n  border-radius: 8px;\\n  max-width: 1200px;\\n}\\n\\n.order-header[_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #bfc9d8, #cf3d73);\\n  color: rgba(165, 76, 76, 0.9921568627);\\n  padding: 10px;\\n  border-radius: 8px;\\n  font-size: 20px;\\n  font-weight: bold;\\n}\\n\\n.order-list-table[_ngcontent-%COMP%] {\\n  width: 100%;\\n  border-collapse: collapse;\\n  margin: 10px 0;\\n}\\n\\n.order-list-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .order-list-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\n  text-align: left;\\n  padding: 12px;\\n}\\n\\n.order-list-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\\n  background-color: #007bff;\\n  color: #fff;\\n  font-weight: bold;\\n  border-bottom: 2px solid #c72020;\\n}\\n\\n.order-item-row[_ngcontent-%COMP%] {\\n  border-bottom: 1px solid #c72020;\\n  background-color: #f4f4f4;\\n}\\n\\n.order-item-row[_ngcontent-%COMP%]:hover {\\n  background-color: #f1f1f1;\\n}\\n\\n.order-item-image[_ngcontent-%COMP%] {\\n  width: 80px;\\n  height: 80px;\\n  border-radius: 8px;\\n  object-fit: cover;\\n}\\n\\n.quantity-input[_ngcontent-%COMP%] {\\n  width: 60px;\\n  text-align: center;\\n}\\n\\n.total-label[_ngcontent-%COMP%] {\\n  font-weight: bold;\\n  text-align: right;\\n}\\n\\n.total-price[_ngcontent-%COMP%] {\\n  font-size: 1.2em;\\n  font-weight: bold;\\n}\\n\\n.comments-section[_ngcontent-%COMP%] {\\n  margin: 15px 0;\\n}\\n\\n.comments-input[_ngcontent-%COMP%] {\\n  width: 100%;\\n  min-height: 120px;\\n  padding: 12px;\\n  border-radius: 8px;\\n  border: 1px solid #c72020;\\n  font-size: 16px;\\n}\\n\\n.button-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: flex-end;\\n  gap: 15px;\\n}\\n\\nbutton[_ngcontent-%COMP%] {\\n  font-size: 16px;\\n  padding: 10px 24px;\\n  border-radius: 8px;\\n}\\n\\nbutton.mat-raised-button[_ngcontent-%COMP%] {\\n  font-weight: bold;\\n}\\n\\nbutton.mat-raised-button.color-primary[_ngcontent-%COMP%] {\\n  background-color: #007bff;\\n  color: #fff;\\n}\\n\\nbutton.mat-raised-button.color-warn[_ngcontent-%COMP%] {\\n  background-color: #b34c56;\\n  color: #fff;\\n}\\n\\nbutton[_ngcontent-%COMP%]:hover {\\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\\n  transform: translateY(-2px);\\n}\\n\\n@media screen and (max-width: 768px) {\\n  .order-summary-card[_ngcontent-%COMP%], .past-orders-card[_ngcontent-%COMP%] {\\n    padding: 15px;\\n  }\\n  .order-list-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .order-list-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\n    font-size: 14px;\\n    padding: 10px;\\n  }\\n  .button-container[_ngcontent-%COMP%] {\\n    flex-direction: column;\\n    align-items: flex-end;\\n  }\\n  button[_ngcontent-%COMP%] {\\n    width: 100%;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvb3JkZXIvb3JkZXIuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBV0E7O0VBRUUsaUJBQUE7RUFDQSxhQUFBO0VBQ0EseUNBYlk7RUFjWixrQkFBQTtFQUNBLGlCQUFBO0FBVkY7O0FBYUE7RUFDRSxxREFsQlU7RUFtQlYsc0NBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7RUFDQSxlQUFBO0VBQ0EsaUJBQUE7QUFWRjs7QUFhQTtFQUNFLFdBQUE7RUFDQSx5QkFBQTtFQUNBLGNBQUE7QUFWRjs7QUFhQTs7RUFFRSxnQkFBQTtFQUNBLGFBQUE7QUFWRjs7QUFhQTtFQUNFLHlCQXBDZ0I7RUFxQ2hCLFdBQUE7RUFDQSxpQkFBQTtFQUNBLGdDQUFBO0FBVkY7O0FBYUE7RUFDRSxnQ0FBQTtFQUNBLHlCQTNDYTtBQWlDZjs7QUFhQTtFQUNFLHlCQTlDUztBQW9DWDs7QUFhQTtFQUNFLFdBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSxpQkFBQTtBQVZGOztBQWFBO0VBQ0UsV0FBQTtFQUNBLGtCQUFBO0FBVkY7O0FBYUE7RUFDRSxpQkFBQTtFQUNBLGlCQUFBO0FBVkY7O0FBYUE7RUFDRSxnQkFBQTtFQUNBLGlCQUFBO0FBVkY7O0FBYUE7RUFDRSxjQUFBO0FBVkY7O0FBYUE7RUFDRSxXQUFBO0VBQ0EsaUJBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7RUFDQSx5QkFBQTtFQUNBLGVBQUE7QUFWRjs7QUFhQTtFQUNFLGFBQUE7RUFDQSx5QkFBQTtFQUNBLFNBQUE7QUFWRjs7QUFhQTtFQUNFLGVBQUE7RUFDQSxrQkFBQTtFQUNBLGtCQUFBO0FBVkY7O0FBYUE7RUFDRSxpQkFBQTtBQVZGOztBQWFBO0VBQ0UseUJBekdlO0VBMEdmLFdBQUE7QUFWRjs7QUFhQTtFQUNFLHlCQTdHWTtFQThHWixXQUFBO0FBVkY7O0FBYUE7RUFDRSx5Q0FBQTtFQUNBLDJCQUFBO0FBVkY7O0FBYUE7RUFDRTs7SUFFRSxhQUFBO0VBVkY7RUFhQTs7SUFFRSxlQUFBO0lBQ0EsYUFBQTtFQVhGO0VBY0E7SUFDRSxzQkFBQTtJQUNBLHFCQUFBO0VBWkY7RUFlQTtJQUNFLFdBQUE7RUFiRjtBQUNGIiwic291cmNlc0NvbnRlbnQiOlsiJG9yZGVyLXN1bW1hcnktYmc6ICNlYjI1MjU7XG4kcGFzdC1vcmRlcnMtYmc6ICNjNzE1MTU7XG4kY2FyZC1zaGFkb3c6IDAgNHB4IDE1cHggcmdiYSgwLCAwLCAwLCAwLjIpO1xuJGhlYWRlci1iZzogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2JmYzlkOCwgI2NmM2Q3Myk7XG4kYnV0dG9uLXByaW1hcnk6ICMwMDdiZmY7XG4kYnV0dG9uLXdhcm46ICNiMzRjNTY7XG4kdGFibGUtaGVhZGVyLWJnOiAjMDA3YmZmO1xuJHRhYmxlLXJvdy1iZzogI2Y0ZjRmNDtcbiRob3Zlci1iZzogI2YxZjFmMTtcbiRib3JkZXItY29sb3I6ICNjNzIwMjA7XG5cbi5vcmRlci1zdW1tYXJ5LWNhcmQsXG4ucGFzdC1vcmRlcnMtY2FyZCB7XG4gIG1hcmdpbjogMjBweCBhdXRvO1xuICBwYWRkaW5nOiAyMHB4O1xuICBib3gtc2hhZG93OiAkY2FyZC1zaGFkb3c7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgbWF4LXdpZHRoOiAxMjAwcHg7XG59XG5cbi5vcmRlci1oZWFkZXIge1xuICBiYWNrZ3JvdW5kOiAkaGVhZGVyLWJnO1xuICBjb2xvcjogI2E1NGM0Y2ZkO1xuICBwYWRkaW5nOiAxMHB4O1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIGZvbnQtc2l6ZTogMjBweDtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5vcmRlci1saXN0LXRhYmxlIHtcbiAgd2lkdGg6IDEwMCU7XG4gIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XG4gIG1hcmdpbjogMTBweCAwO1xufVxuXG4ub3JkZXItbGlzdC10YWJsZSB0aCxcbi5vcmRlci1saXN0LXRhYmxlIHRkIHtcbiAgdGV4dC1hbGlnbjogbGVmdDtcbiAgcGFkZGluZzogMTJweDtcbn1cblxuLm9yZGVyLWxpc3QtdGFibGUgdGgge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAkdGFibGUtaGVhZGVyLWJnO1xuICBjb2xvcjogI2ZmZjtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAkYm9yZGVyLWNvbG9yO1xufVxuXG4ub3JkZXItaXRlbS1yb3cge1xuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgJGJvcmRlci1jb2xvcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogJHRhYmxlLXJvdy1iZztcbn1cblxuLm9yZGVyLWl0ZW0tcm93OmhvdmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogJGhvdmVyLWJnO1xufVxuXG4ub3JkZXItaXRlbS1pbWFnZSB7XG4gIHdpZHRoOiA4MHB4O1xuICBoZWlnaHQ6IDgwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgb2JqZWN0LWZpdDogY292ZXI7XG59XG5cbi5xdWFudGl0eS1pbnB1dCB7XG4gIHdpZHRoOiA2MHB4O1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbi50b3RhbC1sYWJlbCB7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICB0ZXh0LWFsaWduOiByaWdodDtcbn1cblxuLnRvdGFsLXByaWNlIHtcbiAgZm9udC1zaXplOiAxLjJlbTtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5jb21tZW50cy1zZWN0aW9uIHtcbiAgbWFyZ2luOiAxNXB4IDA7XG59XG5cbi5jb21tZW50cy1pbnB1dCB7XG4gIHdpZHRoOiAxMDAlO1xuICBtaW4taGVpZ2h0OiAxMjBweDtcbiAgcGFkZGluZzogMTJweDtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuICBib3JkZXI6IDFweCBzb2xpZCAkYm9yZGVyLWNvbG9yO1xuICBmb250LXNpemU6IDE2cHg7XG59XG5cbi5idXR0b24tY29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgZ2FwOiAxNXB4O1xufVxuXG5idXR0b24ge1xuICBmb250LXNpemU6IDE2cHg7XG4gIHBhZGRpbmc6IDEwcHggMjRweDtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xufVxuXG5idXR0b24ubWF0LXJhaXNlZC1idXR0b24ge1xuICBmb250LXdlaWdodDogYm9sZDtcbn1cblxuYnV0dG9uLm1hdC1yYWlzZWQtYnV0dG9uLmNvbG9yLXByaW1hcnkge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAkYnV0dG9uLXByaW1hcnk7XG4gIGNvbG9yOiAjZmZmO1xufVxuXG5idXR0b24ubWF0LXJhaXNlZC1idXR0b24uY29sb3Itd2FybiB7XG4gIGJhY2tncm91bmQtY29sb3I6ICRidXR0b24td2FybjtcbiAgY29sb3I6ICNmZmY7XG59XG5cbmJ1dHRvbjpob3ZlciB7XG4gIGJveC1zaGFkb3c6IDAgNHB4IDIwcHggcmdiYSgwLCAwLCAwLCAwLjMpO1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7XG59XG5cbkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDc2OHB4KSB7XG4gIC5vcmRlci1zdW1tYXJ5LWNhcmQsXG4gIC5wYXN0LW9yZGVycy1jYXJkIHtcbiAgICBwYWRkaW5nOiAxNXB4O1xuICB9XG5cbiAgLm9yZGVyLWxpc3QtdGFibGUgdGgsXG4gIC5vcmRlci1saXN0LXRhYmxlIHRkIHtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgcGFkZGluZzogMTBweDtcbiAgfVxuXG4gIC5idXR0b24tY29udGFpbmVyIHtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcbiAgfVxuXG4gIGJ1dHRvbiB7XG4gICAgd2lkdGg6IDEwMCU7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}","map":{"version":3,"names":["MatCardModule","CustomTablerIconsModule","MatIcon","MatFormFieldModule","MatGridListModule","MatDividerModule","MatTableModule","MatSortModule","MatListModule","FormsModule","CommonModule","jwtDecode","i0","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵtwoWayListener","OrderComponent_tr_21_Template_input_ngModelChange_6_listener","$event","item_r3","ɵɵrestoreView","_r2","$implicit","ɵɵtwoWayBindingSet","quantity","ɵɵresetView","ɵɵlistener","OrderComponent_tr_21_Template_button_click_13_listener","ctx_r3","ɵɵnextContext","removeItem","ɵɵadvance","ɵɵpropertyInterpolate","food","name","ɵɵproperty","picture","ɵɵsanitizeUrl","ɵɵtextInterpolate","ɵɵtwoWayProperty","ɵɵtextInterpolate1","price","ɵɵpipeBind2","ɵɵtextInterpolate2","item_r5","ɵɵtemplate","OrderComponent_ng_container_43_tr_15_li_10_Template","order_r6","id","orderDate","status","orderItems","total","ɵɵelementContainerStart","OrderComponent_ng_container_43_tr_15_Template","orders","OrderComponent","constructor","orderService","orderStateService","cdr","token","userId","comments","ngOnInit","loadTokenAndUserId","loadOrderItems","fetchOrders","localStorage","getItem","console","error","decodedToken","getItems","log","getOrdersByUserId","subscribe","detectChanges","submitOrder","order","items","getTotalPrice","toFixed","comment","createOrder","response","clearOrder","reduce","item","clearItems","filter","i","forEach","addItem","ɵɵdirectiveInject","i1","OrderService","i2","OrderStateService","ChangeDetectorRef","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","OrderComponent_Template","rf","ctx","OrderComponent_tr_21_Template","OrderComponent_Template_textarea_ngModelChange_32_listener","_r1","OrderComponent_Template_button_click_34_listener","OrderComponent_Template_button_click_36_listener","OrderComponent_ng_container_43_Template","OrderComponent_ng_template_44_Template","ɵɵtemplateRefExtractor","length","noOrders_r7","i3","MatCard","MatCardContent","MatCardHeader","MatCardTitle","i4","DefaultValueAccessor","NumberValueAccessor","NgControlStatus","MinValidator","NgModel","i5","NgForOf","NgIf","DecimalPipe","DatePipe","styles"],"sources":["/home/layth/Desktop/front/front/src/app/pages/order/order.component.ts","/home/layth/Desktop/front/front/src/app/pages/order/order.component.html"],"sourcesContent":["import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { MatCardModule } from '@angular/material/card';\nimport { CustomTablerIconsModule } from '../../custom-tabler-icons.module';\nimport { MatIcon } from '@angular/material/icon';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatGridListModule } from '@angular/material/grid-list';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatTableModule } from '@angular/material/table';\nimport { MatSortModule } from '@angular/material/sort';\nimport { MatListModule } from '@angular/material/list';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { jwtDecode } from 'jwt-decode';\nimport { OrderItem } from '../models/order-item';\nimport { Order } from '../models/order';\nimport { OrderService } from '../menu/order-service.service';\nimport { OrderStateService } from './order-state-service.service';\n\n@Component({\n  selector: 'app-order',\n  standalone: true,\n  imports: [\n    MatCardModule,\n    CustomTablerIconsModule,\n    MatIcon,\n    MatFormFieldModule,\n    MatGridListModule,\n    MatDividerModule,\n    MatTableModule,\n    MatSortModule,\n    MatListModule,\n    FormsModule,\n    CommonModule,\n  ],\n  templateUrl: './order.component.html',\n  styleUrls: ['./order.component.scss']\n})\nexport class OrderComponent implements OnInit {\n  orderItems: OrderItem[] = [];\n  token: string | null = null;\n  userId: number | null = null;\n  comments: string = '';\n  orders: Order[] = [];\n\n  constructor(\n    private orderService: OrderService,\n    private orderStateService: OrderStateService,\n    private cdr: ChangeDetectorRef\n  ) {}\n\n  ngOnInit(): void {\n    this.loadTokenAndUserId();\n    this.loadOrderItems();\n    this.fetchOrders(); // Fetch all past orders on component initialization\n  }\n\n  private loadTokenAndUserId(): void {\n    this.token = localStorage.getItem('token');\n    if (!this.token) {\n      console.error('No token found in local storage!');\n      return;\n    }\n\n    try {\n      const decodedToken: any = jwtDecode(this.token);\n      this.userId = decodedToken.userId;\n    } catch (error) {\n      console.error('Error decoding token:', error);\n    }\n  }\n\n  private loadOrderItems(): void {\n    this.orderItems = this.orderStateService.getItems();\n    console.log('Order items loaded:', this.orderItems);\n  }\n\n  fetchOrders(): void {\n    if (this.userId && this.token) {\n      this.orderService.getOrdersByUserId(this.userId, this.token).subscribe(\n        (orders: Order[]) => {\n          this.orders = orders;\n          console.log('Fetched orders:', this.orders);\n          this.cdr.detectChanges(); \n        },\n        (error) => {\n          console.error('Error fetching orders:', error);\n        }\n      );\n    }\n  }\n\n  submitOrder(): void {\n    if (this.token && this.userId !== null) {\n      const order = {\n        userId: this.userId, \n        items: this.orderItems,\n        total: this.getTotalPrice().toFixed(2),\n        comment: this.comments\n      };\n\n      console.log('Submitting order:', order);\n      this.orderService.createOrder(order, this.token).subscribe(\n        response => {\n          console.log('Order submitted successfully', response);\n          this.clearOrder();\n        },\n        error => {\n          console.error('Error submitting order:', error);\n        }\n      );\n    } else {\n      console.error('Cannot submit order because the token or user ID is undefined!');\n    }\n  }\n\n  getTotalPrice(): number {\n    return this.orderItems.reduce(\n      (total, item) => total + item.food.price * item.quantity,\n      0\n    );\n  }\n\n  clearOrder(): void {\n    this.orderStateService.clearItems();\n    this.orderItems = [];\n    console.log('Order cleared');\n  }\n\n  removeItem(item: OrderItem): void {\n    this.orderItems = this.orderItems.filter(i => i !== item);\n    this.orderStateService.clearItems();\n    this.orderItems.forEach(i => this.orderStateService.addItem(i));\n    console.log('Item removed:', item);\n  }\n}\n","<mat-card class=\"order-summary-card\">\n  <!-- Current Order Summary -->\n  <mat-card-header class=\"order-header\">\n    <mat-card-title>🛒 Order Summary</mat-card-title>\n  </mat-card-header>\n\n  <mat-card-content>\n    <table class=\"order-list-table\">\n      <thead>\n        <tr>\n          <th>Image</th>\n          <th>Description</th>\n          <th>Quantity</th>\n          <th>Unit Price</th>\n          <th>Total Price</th>\n          <th>Action</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let item of orderItems\" class=\"order-item-row\">\n          <td>\n            <img [src]=\"item.food.picture\" alt=\"{{ item.food.name }}\" class=\"order-item-image\">\n          </td>\n          <td>{{ item.food.name }}</td>\n          <td>\n            <input\n              type=\"number\"\n              [(ngModel)]=\"item.quantity\"\n              class=\"quantity-input\"\n              min=\"0\"\n              aria-label=\"Quantity\"\n            />\n          </td>\n          <td>{{ item.food.price }} TND</td>\n          <td>{{ item.food.price * item.quantity | number: '1.2-2' }} TND</td>\n          <td>\n            <button mat-icon-button color=\"warn\" (click)=\"removeItem(item)\">\n              <mat-icon>delete</mat-icon>\n            </button>\n          </td>\n        </tr>\n      </tbody>\n      <tfoot>\n        <tr>\n          <td colspan=\"4\" class=\"total-label\">Total</td>\n          <td class=\"total-price\">{{ getTotalPrice() | number: '1.2-2' }} TND</td>\n        </tr>\n      </tfoot>\n    </table>\n\n    <!-- Comments Section -->\n    <div class=\"comments-section\">\n      <h3>📝 Comments</h3>\n      <textarea\n        matInput\n        placeholder=\"Write your comments here...\"\n        [(ngModel)]=\"comments\"\n        class=\"comments-input\"\n      ></textarea>\n    </div>\n\n    <!-- Action Buttons -->\n    <div class=\"button-container\">\n      <button mat-raised-button color=\"warn\" (click)=\"clearOrder()\">❌ Clear All</button>\n      <button mat-raised-button color=\"primary\" (click)=\"submitOrder()\">✅ Submit Order</button>\n    </div>\n  </mat-card-content>\n</mat-card>\n\n<!-- Past Orders Summary -->\n<mat-card class=\"past-orders-card\">\n  <mat-card-header class=\"order-header\">\n    <mat-card-title>📜 Past Orders</mat-card-title>\n  </mat-card-header>\n\n  <mat-card-content>\n    <ng-container *ngIf=\"orders.length > 0; else noOrders\">\n      <table class=\"order-list-table\">\n        <thead>\n          <tr>\n            <th>Order ID</th>\n            <th>Order Date</th>\n            <th>Status</th>\n            <th>Items</th>\n            <th>Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let order of orders\" class=\"order-item-row\">\n            <td>{{ order.id }}</td>\n            <td>{{ order.orderDate | date: 'short' }}</td>\n            <td>{{ order.status }}</td>\n            <td>\n              <ul>\n                <li *ngFor=\"let item of order.orderItems\">\n                  {{ item.food.name }} x {{ item.quantity }}\n                </li>\n              </ul>\n            </td>\n            <td>{{ order.total | number: '1.2-2' }} TND</td>\n          </tr>\n        </tbody>\n      </table>\n    </ng-container>\n    <ng-template #noOrders>\n      <p>No orders found for this user.</p>\n    </ng-template>\n  </mat-card-content>\n</mat-card>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}